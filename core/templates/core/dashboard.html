{% extends "core/base.html" %}

{% block content %}
<h2>Dashboard</h2>

<h3>Minhas Empresas (como criador)</h3>
<ul>
{% for item in empresas_com_papel %}
    {% if item.papel == 'criador_empresa' %}
    <li>
        <a href="{% url 'core:empresa_detail' item.empresa.id %}">
            {{ item.empresa.nome }}
        </a>
        <span class="badge badge-creator">Criador da Empresa</span>
    </li>
    {% endif %}
{% empty %}
    <li class="empty-state">Nenhuma empresa criada por você</li>
{% endfor %}
</ul>

<h3>Empresas onde participo</h3>
<ul>
{% for item in empresas_com_papel %}
    {% if item.papel != 'criador_empresa' %}
    <li>
        <a href="{% url 'core:empresa_detail' item.empresa.id %}">
            {{ item.empresa.nome }}
        </a>
        
        {# Mostrar apenas UM badge baseado no papel #}
        {% if item.papel == 'criador_projeto' %}
            <span class="badge badge-creator">Criador de Projeto</span>
        {% elif item.papel == 'membro_projeto' %}
            <span class="badge badge-member">Membro de Projeto</span>
        {% endif %}
    </li>
    {% endif %}
{% empty %}
    <li class="empty-state">Não há empresas em que participo</li>
{% endfor %}
</ul>

<div style="margin-top: 30px;">
    <a href="{% url 'core:empresa_create' %}" class="btn btn-primary">Criar nova empresa</a>
    <a href="{% url 'core:projeto_create_global' %}" class="btn btn-primary">Criar novo projeto</a>
</div>
{% endblock %}